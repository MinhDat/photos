(this.webpackJsonpphotos=this.webpackJsonpphotos||[]).push([[0],{30:function(e,t,n){},31:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/logo.6ce24c58.svg"},35:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(7),s=n.n(r),i=(n(30),n(4)),o=(n(31),n(2)),u=function(e){var t=e.setSearchText;return Object(o.jsx)("input",{className:"search",placeholder:"Search image",onChange:function(e){return t(e.target.value)}})},l=(n(33),function(e){var t=e.setSearchText;return Object(o.jsxs)("div",{className:"nav-wrap flex spaceBetween",children:[Object(o.jsxs)("div",{className:"nav-left-wrap flex",children:[Object(o.jsx)("img",{className:"nav-logo",src:n(34).default}),Object(o.jsx)("h1",{className:"nav-title",children:"Photos"})]}),Object(o.jsx)("div",{className:"nav-right-wrap",children:Object(o.jsx)(u,{setSearchText:t})})]})}),j=(n(35),function(e){return e.enable?Object(o.jsx)("div",{className:"spinner"}):null}),d=n(13),f=n(14),b=n(6),p=n.n(b),O=n(11),v=n(23),m=n.n(v),h=n(9),x={base:"https://images-api.nasa.gov",search:"/search"},g=function(){var e,t,n;return{getInstance:function(){return e||delete(e=m.a.create({baseURL:x.base,headers:{Connection:"keep-alive",Accept:"application/json","Content-Type":"application/json","Accept-Language":"en-US,en;q=0.9,vi;q=0.8"}})).constructor,e},setToken:function(e){n=e},getToken:function(){return n},setLogout:function(e){t=e},getLogout:function(){return t}}}(),S=g.getInstance();S.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),S.interceptors.response.use(function(){var e=Object(O.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(204!==t.status&&205!==t.status){e.next=2;break}return e.abrupt("return",null);case 2:if(!(t.status>=200&&t.status<300)){e.next=4;break}return e.abrupt("return",t.data);case 4:return(n=new Error(t.statusText)).response=t,e.abrupt("return",Promise.reject(n));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),function(){var e=Object(O.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 401===t.response.status&&Object(h.a)("Unauthorized or session expired",{position:h.a.POSITION.TOP_CENTER,type:h.a.TYPE.ERROR,toastId:"Unauthorized or session expired"}),e.abrupt("return",Promise.reject(t));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var w=S;var N=n(12),k=n(24),T=n(25),E=(n(55),function(e){var t,n=e.item,c=e.onDelete,r=Object(a.useState)(n.like),s=Object(i.a)(r,2),u=s[0],l=s[1];return Object(o.jsxs)("div",{className:"card-wrap",children:[Object(o.jsxs)("div",{className:"card-info flex column spaceBetween",children:[Object(o.jsxs)("div",{className:"flex spaceBetween",children:[Object(o.jsx)("div",{onClick:function(){var e=JSON.parse(localStorage.getItem("like")||"[]");u?e=e.filter((function(e){return e.data[0].nasa_id!==n.data[0].nasa_id})):e.push(n),localStorage.setItem("like",JSON.stringify(e)),l(!u)},children:u?Object(o.jsx)(N.b,{className:"card-like"}):Object(o.jsx)(N.a,{className:"card-unlike"})}),Object(o.jsx)("div",{onClick:function(){var e=JSON.parse(localStorage.getItem("remove")||"[]");e.push(n),localStorage.setItem("remove",JSON.stringify(e)),c&&c(n)},children:Object(o.jsx)(k.a,{className:"card-remove"})})]}),Object(o.jsxs)("div",{className:"flex spaceBetween",children:[Object(o.jsx)("p",{className:"card-title flex",children:n.data[0].title}),Object(o.jsxs)("span",{className:"card-view",children:["611 ",Object(o.jsx)(T.a,{})]})]})]}),Object(o.jsx)("img",{className:"card-img",src:n&&n.links?null===(t=n.links[0])||void 0===t?void 0:t.href:void 0})]})});n(56);var I=function(e){var t=e.setEnable,n=e.searchText,c=Object(a.useState)([]),r=Object(i.a)(c,2),s=r[0],u=r[1],l=Object(a.useState)(1),j=Object(i.a)(l,2),b=j[0],p=j[1],O=Object(a.useState)(!1),v=Object(i.a)(O,2),m=v[0],h=v[1],g=Object(a.useState)(100),S=Object(i.a)(g,1)[0],N=function(e,t){var n=Object(a.useState)(e),c=Object(i.a)(n,2),r=c[0],s=c[1];return Object(a.useEffect)((function(){var n=setTimeout((function(){s(e)}),t);return function(){clearTimeout(n)}}),[e]),r}(n,350),k=function(e){for(var t=Math.floor((window.innerWidth-200)/250),n=JSON.parse(localStorage.getItem("like")||"[]").map((function(e){return e.data[0].nasa_id})),a=JSON.parse(localStorage.getItem("remove")||"[]").map((function(e){return e.data[0].nasa_id})),c=e.filter((function(e){return!a.includes(e.data[0].nasa_id)})),r=1===b?[]:s,i=0;i<c.length;i++){var o=Object(f.a)(Object(f.a)({},c[i]),{},{like:n.includes(e[i].data[0].nasa_id)}),l=(i+b*S)%t;r[l]?r[l].push(o):r[l]=[o]}u(r)},T=function(e){for(var t=s,n=0;n<s.length;n++)t[n]=Object(d.a)(s[n].filter((function(t){return t.data[0].nasa_id!==e.data[0].nasa_id})));u(Object(d.a)(t))},I=function(){window.innerHeight+document.documentElement.scrollTop===document.scrollingElement.scrollHeight&&(p(b+1),t(!0))},y=function(){var e=Date.now();w.get(x.search,{params:{q:n||'""',page:b}}).then((function(n){var a=Date.now();setTimeout((function(){var e;k(null===n||void 0===n||null===(e=n.collection)||void 0===e?void 0:e.items),t(!1),window.removeEventListener("scroll",I),window.addEventListener("scroll",I)}),2e3-(a-e))}))};return Object(a.useEffect)((function(){t(!0),u([])}),[]),Object(a.useEffect)((function(){y()}),[b]),Object(a.useEffect)((function(){m?(u([]),t(!0),1!==b?p(1):y()):h(!0)}),[N]),Object(o.jsx)("div",{className:"home flex row center",children:s.map((function(e,t){return Object(o.jsx)("div",{key:t,children:e.map((function(e,t){return Object(o.jsx)(E,{item:e,key:t,onDelete:T})}))})}))})};n(57);var y=function(){var e=Object(a.useState)(!1),t=Object(i.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(""),s=Object(i.a)(r,2),u=s[0],d=s[1];return Object(o.jsxs)("div",{className:"App",children:[Object(o.jsx)(l,{setSearchText:d}),Object(o.jsx)(I,{setEnable:c,searchText:u}),Object(o.jsx)(j,{enable:n})]})},C=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,59)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};s.a.render(Object(o.jsx)(c.a.StrictMode,{children:Object(o.jsx)(y,{})}),document.getElementById("root")),C()}},[[58,1,2]]]);
//# sourceMappingURL=main.d7c5fbfb.chunk.js.map